<div class="row justify-content-center mt-5">
    <div class="col-6">
        <div class="card">
            <div class="card-body">
                <span class="m-3">
                    <img src="<%= @project.photo.url %>" class="card-img-top img-fluid" alt="logo">
                </span>
                <h3 class="card-title text-center p-3"><%=@project.name%></h3>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item"><h4 class="text-center">Valor da doação <%= number_to_currency(@donation.value)%> </h4></li>
                </ul>
                <button id="pay-button" class="botao-pagamento btn btn-success btn-block mt-3 ">Pagar </button>                
            </div>
                
        </div>
    </div>
</div>
<script>
    var button = document.getElementById('pay-button');

    // Abrir o modal ao clicar no botão
    button.addEventListener('click', function() {
        console.log("passou")

      // inicia a instância do checkout
      var checkout = new PagarMeCheckout.Checkout({
        encryption_key: '123123123',
        success: function(data) {
          console.log(data);
        },
        error: function(err) {
        	console.log(err);
        },
        close: function() {
        	console.log('The modal has been closed.');
        }
      });

      // Obs.: é necessário passar os valores boolean como string
      checkout.open({
        amount: '<%=@donation.value%>00',
        buttonText: 'Pagar',
        buttonClass: 'botao-pagamento',
        customerData: 'false',
        createToken: 'true',
        paymentMethods: 'credit_card',
        customer: {
          external_id: '#123456789',
          name: 'Fulano',
          type: 'individual',
          country: 'br',
          email: 'fulano@email.com',
          documents: [
            {
              type: 'cpf',
              number: '71404665560',
            },
          ],
          phone_numbers: ['+5511999998888', '+5511888889999'],
          birthday: '1985-01-01'
        }
      });
    });
    </script>